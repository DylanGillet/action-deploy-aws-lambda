name: Deploy Python Code to AWS Lambda
author: dpo
description: Deploy python code to AWS Lambda
inputs:
  function_name:
    description: the Lambda function name
    required: true
  working_directory:
    description: the Lambda function directory
    required: true
  runtime:
    description: the Lambda function runtime
    required: true
  role:
    description: the Lambda function IAM role
    required: true
  handler:
    description: the Lambda function handler
    required: true
  memory:
    description: the Lambda function memory size in MB
    required: true
  timeout:
    description: the Lambda function time limit in seconds
    required: true
  env_variables:
    description: Environment variables in the format {var1=value1,var2=value2}
    required: false
  vpc_config:
    description: VPC configuration in the format SubnetIds=string,string,SecurityGroupIds=string,string
    required: false
  layers:
    description: Lambda layers ARN
    required: false

runs:
  using: "composite"
  steps:
    - run: deploy-lambda.sh
      shell: bash
